<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ± - Admin Control Panel</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Arial,sans-serif;background:linear-gradient(135deg,#1a1a2e,#16213e);min-height:100vh;color:#fff;padding:20px}.container{max-width:1200px;margin:0 auto}.header{text-align:center;margin-bottom:40px;padding:30px;background:rgba(255,255,255,0.1);border-radius:20px;backdrop-filter:blur(20px)}.header h1{font-size:2.5rem;margin-bottom:10px;color:#4ade80}.header p{opacity:0.9}.card{background:rgba(255,255,255,0.1);border-radius:15px;padding:25px;margin-bottom:25px;backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.2)}.card h2{color:#60a5fa;margin-bottom:20px;font-size:1.5rem}.btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 25px;border-radius:8px;cursor:pointer;margin:5px;transition:all 0.3s ease;font-size:14px}.btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,0.3)}.btn-success{background:linear-gradient(135deg,#10b981,#059669)}.btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626)}.btn-warning{background:linear-gradient(135deg,#f59e0b,#d97706)}.btn-info{background:linear-gradient(135deg,#3b82f6,#2563eb)}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:25px}.stat-card{background:rgba(255,255,255,0.1);padding:20px;border-radius:10px;text-align:center}.stat-number{font-size:2rem;font-weight:bold;color:#4ade80}.stat-label{opacity:0.8;margin-top:5px}.table{width:100%;border-collapse:collapse;margin-top:15px}.table th,.table td{padding:12px;text-align:right;border-bottom:1px solid rgba(255,255,255,0.1)}.table th{background:rgba(255,255,255,0.1);color:#60a5fa}.table tr:hover{background:rgba(255,255,255,0.05)}.form-group{margin-bottom:15px}.form-group label{display:block;margin-bottom:5px;color:#60a5fa}.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px;border:1px solid rgba(255,255,255,0.3);border-radius:5px;background:rgba(255,255,255,0.1);color:#fff}.form-group input::placeholder{color:rgba(255,255,255,0.6)}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:1000}.modal-content{background:#1a1a2e;padding:30px;border-radius:15px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto}.notification{position:fixed;top:20px;right:20px;background:#10b981;color:#fff;padding:15px 25px;border-radius:10px;z-index:1001;transform:translateX(400px);transition:transform 0.3s ease}.notification.show{transform:translateX(0)}.notification.error{background:#ef4444}.notification.warning{background:#f59e0b}@media(max-width:768px){.grid{grid-template-columns:1fr}.stats{grid-template-columns:repeat(2,1fr)}.container{padding:10px}}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>ğŸ” Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
<p>Ø¥Ø¯Ø§Ø±Ø© Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„Ù…Ø®Ø¯Ø±Ø§Øª</p>
<p style="font-size:0.9rem;opacity:0.7;margin-top:10px">Admin Control Panel - Color Testing System</p>
</div>
<div class="stats">
<div class="stat-card">
<div class="stat-number" id="totalTests">0</div>
<div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</div>
</div>
<div class="stat-card">
<div class="stat-number" id="marquisTests">0</div>
<div class="stat-label">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø§Ø±ÙƒÙŠØ²</div>
</div>
<div class="stat-card">
<div class="stat-number" id="ferricTests">0</div>
<div class="stat-label">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙƒØ¨Ø±ÙŠØªØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ¯</div>
</div>
<div class="stat-card">
<div class="stat-number" id="meckeTests">0</div>
<div class="stat-label">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ÙŠÙƒÙŠ</div>
</div>
<div class="stat-card">
<div class="stat-number" id="advancedTests">0</div>
<div class="stat-label">Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
</div>
<div class="stat-card">
<div class="stat-number" id="uniqueSubstances">0</div>
<div class="stat-label">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ÙƒØªØ´ÙØ©</div>
</div>
</div>
<div class="grid">
<div class="card">
<h2>ğŸ“Š Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
<button class="btn btn-success" onclick="exportDatabase()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
<button class="btn btn-info" onclick="importDatabase()">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
<button class="btn btn-warning" onclick="addNewTest()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</button>
<button class="btn btn-danger" onclick="resetDatabase()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>
<div class="card">
<h2>ğŸ§ª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h2>
<button class="btn btn-info" onclick="viewAllTests()">ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</button>
<button class="btn btn-warning" onclick="editTest()">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±</button>
<button class="btn btn-danger" onclick="deleteTest()">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ø®ØªØ¨Ø§Ø±</button>
<button class="btn btn-success" onclick="duplicateTest()">ğŸ“‹ Ù†Ø³Ø® Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>
<div class="card">
<h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
<button class="btn btn-info" onclick="systemSettings()">ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</button>
<button class="btn btn-warning" onclick="backupSystem()">ğŸ’¾ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</button>
<button class="btn btn-success" onclick="systemLogs()">ğŸ“‹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</button>
<button class="btn btn-danger" onclick="clearCache()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª</button>
</div>
<div class="card">
<h2>ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
<button class="btn btn-info" onclick="generateReport()">ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</button>
<button class="btn btn-success" onclick="usageStats()">ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</button>
<button class="btn btn-warning" onclick="errorLogs()">âš ï¸ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</button>
<button class="btn btn-info" onclick="exportStats()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
</div>
</div>
<div class="card">
<h2>ğŸ—ƒï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
<div id="databaseTable"></div>
</div>
</div>

<!-- Copyright Section -->
<footer class="mt-16 text-center">
<div class="glass-effect p-6 rounded-2xl border border-gray-500/30 max-w-2xl mx-auto">
<div class="flex items-center justify-center mb-4">
<i class="fas fa-copyright text-blue-400 text-xl mr-3"></i>
<span class="text-xl font-bold text-white">2025</span>
</div>
<p class="text-gray-300 mb-4">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¯Ù‰ Ù…Ø·ÙˆØ±ÙŠ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</p>
<div class="flex flex-col md:flex-row items-center justify-center gap-3 mb-4">
<div class="flex items-center glass-effect px-4 py-2 rounded-lg border border-purple-500/30 hover:border-purple-400 transition-all duration-300">
<i class="fas fa-user-tie text-purple-400 mr-2"></i>
<span class="text-white font-semibold">Ù…Ø­Ù…Ø¯ Ù†ÙØ§Ø¹ Ø§Ù„Ø±ÙˆÙŠÙ„ÙŠ</span>
</div>
<div class="flex items-center glass-effect px-4 py-2 rounded-lg border border-blue-500/30 hover:border-blue-400 transition-all duration-300">
<i class="fas fa-user-graduate text-blue-400 mr-2"></i>
<span class="text-white font-semibold">ÙŠÙˆØ³Ù Ù…Ø³ÙŠØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ</span>
</div>
</div>
<div class="text-xs text-gray-400 space-y-1">
<p>ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ¨Ø­Ø«ÙŠØ©</p>
<p>Ø§Ù„Ø¥ØµØ¯Ø§Ø± 1.0.0 - ÙŠÙ†Ø§ÙŠØ± 2025</p>
</div>
</div>
</footer>
<div class="modal" id="modal">
<div class="modal-content">
<h3 id="modalTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ø§ÙØ°Ø©</h3>
<div id="modalBody"></div>
<div style="text-align:center;margin-top:20px">
<button class="btn" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>
</div>
</div>
<script>
let chemicalDB=[{method_name:'Marquis Test',color_result:'Purple to violet',possible_substance:'Opium'},{method_name:'Marquis Test',color_result:'Brownish purple',possible_substance:'Morphine'},{method_name:'Marquis Test',color_result:'Purple',possible_substance:'Heroin'},{method_name:'Marquis Test',color_result:'Orange â†’ Brown',possible_substance:'Amphetamine'},{method_name:'Marquis Test',color_result:'Orange',possible_substance:'Methamphetamine'},{method_name:'Marquis Test',color_result:'Red â†’ Brown',possible_substance:'MDMA (Ecstasy)'},{method_name:'Marquis Test',color_result:'Yellow â†’ Brown',possible_substance:'Mescaline'},{method_name:'Marquis Test',color_result:'No color change',possible_substance:'Cocaine, Cannabis'},{method_name:'Ferric Sulfate Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Ferric Sulfate Test',color_result:'Green',possible_substance:'Cannabis compounds'},{method_name:'Ferric Sulfate Test',color_result:'Purple',possible_substance:'Phenothiazines'},{method_name:'Ferric Sulfate Test',color_result:'Red',possible_substance:'Salicylates'},{method_name:'Ferric Sulfate Test',color_result:'Yellow',possible_substance:'Barbiturates'},{method_name:'Mecke Test',color_result:'Blue to green',possible_substance:'Morphine'},{method_name:'Mecke Test',color_result:'Blue',possible_substance:'Codeine'},{method_name:'Mecke Test',color_result:'Dark green',possible_substance:'Heroin'},{method_name:'Mecke Test',color_result:'Yellow â†’ Light Green',possible_substance:'MDMA (Ecstasy)'},{method_name:'Mecke Test',color_result:'Orange',possible_substance:'Methamphetamine'},{method_name:'Mecke Test',color_result:'No color change',possible_substance:'Cocaine, Cannabis'},{method_name:'Nitric Acid Test',color_result:'Yellow',possible_substance:'Heroin'},{method_name:'Nitric Acid Test',color_result:'Orange',possible_substance:'Morphine'},{method_name:'Nitric Acid Test',color_result:'Red',possible_substance:'Codeine'},{method_name:'Fast Blue B Salt Test',color_result:'Blue',possible_substance:'Cannabis (THC)'},{method_name:'Fast Blue B Salt Test',color_result:'Purple',possible_substance:'Cannabis compounds'},{method_name:'Fast Blue B Salt Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Duquenois-Levine Test',color_result:'Purple',possible_substance:'Cannabis (THC)'},{method_name:'Duquenois-Levine Test',color_result:'Blue',possible_substance:'Cannabis compounds'},{method_name:'Duquenois-Levine Test',color_result:'Green',possible_substance:'Cannabis derivatives'},{method_name:'Cobalt Thiocyanate Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Cobalt Thiocyanate Test',color_result:'Light blue',possible_substance:'Cocaine HCl'},{method_name:'Cobalt Thiocyanate Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Scott Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Scott Test',color_result:'Pink',possible_substance:'Lidocaine'},{method_name:'Scott Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Wagner Test',color_result:'Brown',possible_substance:'Alkaloids'},{method_name:'Wagner Test',color_result:'Orange-brown',possible_substance:'Morphine'},{method_name:'Wagner Test',color_result:'Yellow-brown',possible_substance:'Codeine'},{method_name:'Simon Test',color_result:'Blue',possible_substance:'MDMA'},{method_name:'Simon Test',color_result:'Purple',possible_substance:'Methamphetamine'},{method_name:'Simon Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Ehrlich Test',color_result:'Purple',possible_substance:'LSD'},{method_name:'Ehrlich Test',color_result:'Blue',possible_substance:'Psilocybin'},{method_name:'Ehrlich Test',color_result:'Pink',possible_substance:'DMT'},{method_name:'Liebermann Test',color_result:'Orange',possible_substance:'Amphetamine'},{method_name:'Liebermann Test',color_result:'Red',possible_substance:'Methamphetamine'},{method_name:'Liebermann Test',color_result:'Yellow',possible_substance:'MDMA'}];
function updateStats(){document.getElementById('totalTests').textContent=chemicalDB.length;document.getElementById('marquisTests').textContent=chemicalDB.filter(t=>t.method_name==='Marquis Test').length;document.getElementById('ferricTests').textContent=chemicalDB.filter(t=>t.method_name==='Ferric Sulfate Test').length;document.getElementById('meckeTests').textContent=chemicalDB.filter(t=>t.method_name==='Mecke Test').length;const advancedTests=chemicalDB.filter(t=>!['Marquis Test','Ferric Sulfate Test','Mecke Test'].includes(t.method_name)).length;document.getElementById('advancedTests').textContent=advancedTests;const uniqueSubstances=new Set(chemicalDB.map(t=>t.possible_substance)).size;document.getElementById('uniqueSubstances').textContent=uniqueSubstances}
function updateDatabaseTable(){const table=document.getElementById('databaseTable');let html='<table class="table"><thead><tr><th>Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</th><th>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙˆÙ†</th><th>Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead><tbody>';chemicalDB.forEach((test,index)=>{html+=`<tr><td>${test.method_name}</td><td>${test.color_result}</td><td>${test.possible_substance}</td><td><button class="btn btn-warning" onclick="editTestItem(${index})">ØªØ¹Ø¯ÙŠÙ„</button> <button class="btn btn-danger" onclick="deleteTestItem(${index})">Ø­Ø°Ù</button></td></tr>`});html+='</tbody></table>';table.innerHTML=html}
function exportDatabase(){const data=JSON.stringify(chemicalDB,null,2);const blob=new Blob([data],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`chemical-database-${new Date().toISOString().split('T')[0]}.json`;a.click();showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­')}
function importDatabase(){const input=document.createElement('input');input.type='file';input.accept='.json';input.onchange=function(e){const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=function(e){try{const newDB=JSON.parse(e.target.result);if(Array.isArray(newDB)&&newDB.length>0&&newDB[0].method_name){chemicalDB=newDB;updateStats();updateDatabaseTable();showNotification('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­')}else{showNotification('Ù…Ù„Ù Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­','error')}}catch(err){showNotification('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù','error')}};reader.readAsText(file)}};input.click()}
function addNewTest(){showModal('Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯',`<div class="form-group"><label>Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</label><select id="testMethod"><option value="Marquis Test">Marquis Test</option><option value="Ferric Sulfate Test">Ferric Sulfate Test</option><option value="Mecke Test">Mecke Test</option><option value="Nitric Acid Test">Nitric Acid Test</option><option value="Fast Blue B Salt Test">Fast Blue B Salt Test</option><option value="Duquenois-Levine Test">Duquenois-Levine Test</option><option value="Cobalt Thiocyanate Test">Cobalt Thiocyanate Test</option><option value="Scott Test">Scott Test</option><option value="Wagner Test">Wagner Test</option><option value="Simon Test">Simon Test</option><option value="Ehrlich Test">Ehrlich Test</option><option value="Liebermann Test">Liebermann Test</option></select></div><div class="form-group"><label>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙˆÙ†:</label><input type="text" id="colorResult" placeholder="Ù…Ø«Ø§Ù„: Purple to violet"></div><div class="form-group"><label>Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</label><input type="text" id="possibleSubstance" placeholder="Ù…Ø«Ø§Ù„: Opium"></div><button class="btn btn-success" onclick="saveNewTest()">Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>`)}
function saveNewTest(){const method=document.getElementById('testMethod').value;const color=document.getElementById('colorResult').value;const substance=document.getElementById('possibleSubstance').value;if(method&&color&&substance){chemicalDB.push({method_name:method,color_result:color,possible_substance:substance});updateStats();updateDatabaseTable();closeModal();showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­')}else{showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„','error')}}
function editTestItem(index){const test=chemicalDB[index];showModal('ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±',`<div class="form-group"><label>Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</label><select id="editTestMethod"><option value="Marquis Test" ${test.method_name==='Marquis Test'?'selected':''}>Marquis Test</option><option value="Ferric Sulfate Test" ${test.method_name==='Ferric Sulfate Test'?'selected':''}>Ferric Sulfate Test</option><option value="Mecke Test" ${test.method_name==='Mecke Test'?'selected':''}>Mecke Test</option><option value="Nitric Acid Test" ${test.method_name==='Nitric Acid Test'?'selected':''}>Nitric Acid Test</option><option value="Fast Blue B Salt Test" ${test.method_name==='Fast Blue B Salt Test'?'selected':''}>Fast Blue B Salt Test</option><option value="Duquenois-Levine Test" ${test.method_name==='Duquenois-Levine Test'?'selected':''}>Duquenois-Levine Test</option><option value="Cobalt Thiocyanate Test" ${test.method_name==='Cobalt Thiocyanate Test'?'selected':''}>Cobalt Thiocyanate Test</option><option value="Scott Test" ${test.method_name==='Scott Test'?'selected':''}>Scott Test</option><option value="Wagner Test" ${test.method_name==='Wagner Test'?'selected':''}>Wagner Test</option><option value="Simon Test" ${test.method_name==='Simon Test'?'selected':''}>Simon Test</option><option value="Ehrlich Test" ${test.method_name==='Ehrlich Test'?'selected':''}>Ehrlich Test</option><option value="Liebermann Test" ${test.method_name==='Liebermann Test'?'selected':''}>Liebermann Test</option></select></div><div class="form-group"><label>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙˆÙ†:</label><input type="text" id="editColorResult" value="${test.color_result}"></div><div class="form-group"><label>Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©:</label><input type="text" id="editPossibleSubstance" value="${test.possible_substance}"></div><button class="btn btn-success" onclick="saveEditTest(${index})">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>`)}
function saveEditTest(index){const method=document.getElementById('editTestMethod').value;const color=document.getElementById('editColorResult').value;const substance=document.getElementById('editPossibleSubstance').value;if(method&&color&&substance){chemicalDB[index]={method_name:method,color_result:color,possible_substance:substance};updateStats();updateDatabaseTable();closeModal();showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­')}else{showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„','error')}}
function deleteTestItem(index){if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ')){chemicalDB.splice(index,1);updateStats();updateDatabaseTable();showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­')}}
function resetDatabase(){if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!')){location.reload()}}
function viewAllTests(){showModal('Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª',`<div style="max-height:400px;overflow-y:auto">${document.getElementById('databaseTable').innerHTML}</div>`)}
function showModal(title,content){document.getElementById('modalTitle').textContent=title;document.getElementById('modalBody').innerHTML=content;document.getElementById('modal').style.display='flex'}
function closeModal(){document.getElementById('modal').style.display='none'}
function showNotification(message,type='success'){const notification=document.createElement('div');notification.className=`notification ${type} show`;notification.textContent=message;document.body.appendChild(notification);setTimeout(()=>{notification.classList.remove('show');setTimeout(()=>document.body.removeChild(notification),300)},3000)}
function generateReport(){const report={totalTests:chemicalDB.length,testsByMethod:{marquis:chemicalDB.filter(t=>t.method_name==='Marquis Test').length,ferric:chemicalDB.filter(t=>t.method_name==='Ferric Sulfate Test').length,mecke:chemicalDB.filter(t=>t.method_name==='Mecke Test').length},generatedAt:new Date().toISOString()};const data=JSON.stringify(report,null,2);const blob=new Blob([data],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`system-report-${new Date().toISOString().split('T')[0]}.json`;a.click();showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­')}
updateStats();updateDatabaseTable();
</script>
</body>
</html>
