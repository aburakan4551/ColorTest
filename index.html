<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="msapplication-tap-highlight" content="no">
<title>اختبارات الألوان للكشف عن المخدرات - Color Testing for Drug Detection</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
[dir="rtl"]{font-family:'Noto Sans Arabic',system-ui,sans-serif}[dir="ltr"]{font-family:'Inter',system-ui,sans-serif}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#fff;overflow-x:hidden}[dir="rtl"]{text-align:right}[dir="ltr"]{text-align:left}.container{max-width:1200px;margin:0 auto;padding:20px;position:relative;z-index:1}.header{text-align:center;margin-bottom:40px;position:relative}.logo{width:120px;height:120px;background:linear-gradient(135deg,#1a1a2e,#6366f1);border-radius:50%;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;font-size:48px;box-shadow:0 10px 30px rgba(0,0,0,0.3);animation:pulse 2s infinite}.title{font-size:2.5rem;font-weight:bold;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.subtitle{font-size:1.2rem;opacity:0.9;margin-bottom:20px}.lang-toggle{position:absolute;top:20px;left:20px;background:rgba(255,255,255,0.2);border:none;color:#fff;padding:10px 20px;border-radius:25px;cursor:pointer;backdrop-filter:blur(10px);transition:all 0.3s ease}.lang-toggle:hover{background:rgba(255,255,255,0.3);transform:translateY(-2px)}.progress-bar{width:100%;height:6px;background:rgba(255,255,255,0.2);border-radius:3px;margin-bottom:40px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,#4facfe,#00f2fe);border-radius:3px;transition:width 0.5s ease;width:25%}.step{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:30px;margin-bottom:30px;border:1px solid rgba(255,255,255,0.2);box-shadow:0 8px 32px rgba(0,0,0,0.1);transition:all 0.3s ease}.step:hover{transform:translateY(-5px);box-shadow:0 15px 40px rgba(0,0,0,0.2)}.step h2{font-size:1.8rem;margin-bottom:20px;color:#fff}.step-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.test-card{background:rgba(255,255,255,0.1);border-radius:15px;padding:25px;text-align:center;cursor:pointer;transition:all 0.3s ease;border:2px solid transparent}.test-card:hover{transform:scale(1.05);border-color:rgba(255,255,255,0.5);background:rgba(255,255,255,0.2)}.test-card h3{font-size:1.3rem;margin-bottom:15px}.test-card p{opacity:0.9;line-height:1.6}.color-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.color-option{background:rgba(255,255,255,0.1);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:all 0.3s ease;border:2px solid transparent}.color-option:hover{transform:scale(1.02);border-color:rgba(255,255,255,0.5)}.color-swatch{width:50px;height:50px;border-radius:50%;margin:0 auto 10px;border:3px solid #fff;box-shadow:0 4px 12px rgba(0,0,0,0.3)}.btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:15px 30px;border-radius:25px;font-size:1rem;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.2)}.btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.3)}.btn:active{transform:translateY(0)}.hidden{display:none!important}.fade-in{animation:fadeIn 0.5s ease-in}.slide-up{animation:slideUp 0.5s ease-out}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}.notification{position:fixed;top:20px;right:20px;background:rgba(0,0,0,0.9);color:#fff;padding:15px 25px;border-radius:10px;z-index:1000;transform:translateX(400px);transition:transform 0.3s ease}.notification.show{transform:translateX(0)}.result-section{background:rgba(255,255,255,0.1);border-radius:20px;padding:30px;margin-top:20px}.result-icon{font-size:4rem;margin-bottom:20px}.result-title{font-size:2rem;margin-bottom:15px}.result-details{background:rgba(0,0,0,0.2);border-radius:15px;padding:20px;margin-top:20px}.share-buttons{display:flex;gap:10px;justify-content:center;margin-top:20px;flex-wrap:wrap}.share-btn{background:rgba(255,255,255,0.2);border:none;color:#fff;padding:10px 20px;border-radius:20px;cursor:pointer;transition:all 0.3s ease}.share-btn:hover{background:rgba(255,255,255,0.3);transform:translateY(-2px)}@media(max-width:768px){.container{padding:15px}.title{font-size:2rem}.step-content{grid-template-columns:1fr}.color-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.share-buttons{flex-direction:column;align-items:center}}
</style>
</head>
<body>
<div class="container">
<button class="lang-toggle" onclick="toggleLanguage()">🌐 EN</button>
<div class="header">
<div class="logo">🧪</div>
<h1 class="title" id="mainTitle">اختبارات الألوان للكشف عن المخدرات</h1>
<p class="subtitle" id="mainSubtitle">نظام متقدم لاختبار المواد باستخدام الكواشف الكيميائية</p>
</div>
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="step fade-in" id="step1">
<h2 id="step1Title">الخطوة 1: اختيار نوع الاختبار</h2>
<div class="step-content">
<div class="test-card" onclick="selectTest('marquis')">
<h3 id="marquisTitle">اختبار ماركيز</h3>
<p id="marquisDesc">للكشف عن الأفيونات والأمفيتامينات</p>
</div>
<div class="test-card" onclick="selectTest('ferric')">
<h3 id="ferricTitle">اختبار كبريتات الحديد</h3>
<p id="ferricDesc">للكشف عن الكوكايين والقنب</p>
</div>
<div class="test-card" onclick="selectTest('mecke')">
<h3 id="meckeTitle">اختبار ميكي</h3>
<p id="meckeDesc">للكشف عن المورفين والكودايين</p>
</div>
<div class="test-card" onclick="selectTest('nitric')">
<h3 id="nitricTitle">اختبار حمض النيتريك</h3>
<p id="nitricDesc">للكشف عن الهيروين والمورفين</p>
</div>
<div class="test-card" onclick="selectTest('fastblue')">
<h3 id="fastblueTitle">اختبار الملح الأزرق السريع</h3>
<p id="fastblueDesc">للكشف عن القنب (THC)</p>
</div>
<div class="test-card" onclick="selectTest('duquenois')">
<h3 id="duquenoisTitle">اختبار دوكينوا-ليفين</h3>
<p id="duquenoisDesc">للكشف عن القنب ومشتقاته</p>
</div>
<div class="test-card" onclick="selectTest('cobalt')">
<h3 id="cobaltTitle">اختبار كوبالت ثيوسيانات</h3>
<p id="cobaltDesc">للكشف عن الكوكايين</p>
</div>
<div class="test-card" onclick="selectTest('scott')">
<h3 id="scottTitle">اختبار سكوت</h3>
<p id="scottDesc">للكشف عن الكوكايين والليدوكايين</p>
</div>
<div class="test-card" onclick="selectTest('wagner')">
<h3 id="wagnerTitle">اختبار واجنر</h3>
<p id="wagnerDesc">للكشف عن القلويدات</p>
</div>
<div class="test-card" onclick="selectTest('simon')">
<h3 id="simonTitle">اختبار سايمون</h3>
<p id="simonDesc">للكشف عن MDMA والميثامفيتامين</p>
</div>
<div class="test-card" onclick="selectTest('ehrlich')">
<h3 id="ehrlichTitle">اختبار إيرليش</h3>
<p id="ehrlichDesc">للكشف عن LSD والسيلوسيبين</p>
</div>
<div class="test-card" onclick="selectTest('liebermann')">
<h3 id="liebermannTitle">اختبار ليبرمان</h3>
<p id="liebermannDesc">للكشف عن الأمفيتامينات</p>
</div>
</div>
</div>
<div class="step hidden" id="step2">
<h2 id="step2Title">الخطوة 2: تعليمات التحضير</h2>
<div id="instructions"></div>
<button class="btn" onclick="proceedToStep3()" id="proceedBtn">المتابعة للخطوة التالية</button>
</div>
<div class="step hidden" id="step3">
<h2 id="step3Title">الخطوة 3: اختيار اللون المُلاحظ</h2>
<div class="color-grid" id="colorOptions"></div>
</div>
<div class="step hidden" id="step4">
<h2 id="step4Title">الخطوة 4: النتائج</h2>
<div class="result-section" id="results"></div>
<div class="share-buttons">
<button class="share-btn" onclick="shareResult('print')">🖨️ طباعة</button>
<button class="share-btn" onclick="shareResult('save')">💾 حفظ</button>
<button class="share-btn" onclick="newTest()">🔄 اختبار جديد</button>
</div>
</div>
</div>

<!-- Copyright Section -->
<footer class="mt-16 text-center">
<div class="glass-effect p-6 rounded-2xl border border-gray-500/30 max-w-2xl mx-auto">
<div class="flex items-center justify-center mb-4">
<i class="fas fa-copyright text-blue-400 text-xl mr-3"></i>
<span class="text-xl font-bold text-white">2025</span>
</div>
<p class="text-gray-300 mb-4" id="copyrightText">جميع الحقوق محفوظة لدى مطوري البرنامج</p>
<div class="flex flex-col md:flex-row items-center justify-center gap-3 mb-4">
<div class="flex items-center glass-effect px-4 py-2 rounded-lg border border-purple-500/30 hover:border-purple-400 transition-all duration-300">
<i class="fas fa-user-tie text-purple-400 mr-2"></i>
<span class="text-white font-semibold">محمد نفاع الرويلي</span>
</div>
<div class="flex items-center glass-effect px-4 py-2 rounded-lg border border-blue-500/30 hover:border-blue-400 transition-all duration-300">
<i class="fas fa-user-graduate text-blue-400 mr-2"></i>
<span class="text-white font-semibold">يوسف مسير العنزي</span>
</div>
</div>
<div class="text-xs text-gray-400 space-y-1">
<p id="copyrightNote">تم تطوير هذا النظام لأغراض تعليمية وبحثية</p>
<p id="versionInfo">الإصدار 1.0.0 - يناير 2025</p>
</div>
</div>
</footer>

<script>
let currentLang='ar',selectedTest='',selectedColor='',testData={};
const translations={ar:{mainTitle:'اختبارات الألوان للكشف عن المخدرات',mainSubtitle:'نظام متقدم لاختبار المواد باستخدام الكواشف الكيميائية',step1Title:'الخطوة 1: اختيار نوع الاختبار',step2Title:'الخطوة 2: تعليمات التحضير',step3Title:'الخطوة 3: اختيار اللون المُلاحظ',step4Title:'الخطوة 4: النتائج',marquisTitle:'اختبار ماركيز',marquisDesc:'للكشف عن الأفيونات والأمفيتامينات',ferricTitle:'اختبار كبريتات الحديد',ferricDesc:'للكشف عن الكوكايين والقنب',meckeTitle:'اختبار ميكي',meckeDesc:'للكشف عن المورفين والكودايين',nitricTitle:'اختبار حمض النيتريك',nitricDesc:'للكشف عن الهيروين والمورفين',fastblueTitle:'اختبار الملح الأزرق السريع',fastblueDesc:'للكشف عن القنب (THC)',duquenoisTitle:'اختبار دوكينوا-ليفين',duquenoisDesc:'للكشف عن القنب ومشتقاته',cobaltTitle:'اختبار كوبالت ثيوسيانات',cobaltDesc:'للكشف عن الكوكايين',scottTitle:'اختبار سكوت',scottDesc:'للكشف عن الكوكايين والليدوكايين',wagnerTitle:'اختبار واجنر',wagnerDesc:'للكشف عن القلويدات',simonTitle:'اختبار سايمون',simonDesc:'للكشف عن MDMA والميثامفيتامين',ehrlichTitle:'اختبار إيرليش',ehrlichDesc:'للكشف عن LSD والسيلوسيبين',liebermannTitle:'اختبار ليبرمان',liebermannDesc:'للكشف عن الأمفيتامينات',proceedBtn:'المتابعة للخطوة التالية',copyrightText:'جميع الحقوق محفوظة لدى مطوري البرنامج',copyrightNote:'تم تطوير هذا النظام لأغراض تعليمية وبحثية',versionInfo:'الإصدار 1.0.0 - يناير 2025'},en:{mainTitle:'Color Testing for Drug Detection',mainSubtitle:'Advanced system for substance testing using chemical reagents',step1Title:'Step 1: Select Test Type',step2Title:'Step 2: Preparation Instructions',step3Title:'Step 3: Select Observed Color',step4Title:'Step 4: Results',marquisTitle:'Marquis Test',marquisDesc:'For detecting opiates and amphetamines',ferricTitle:'Ferric Sulfate Test',ferricDesc:'For detecting cocaine and cannabis',meckeTitle:'Mecke Test',meckeDesc:'For detecting morphine and codeine',nitricTitle:'Nitric Acid Test',nitricDesc:'For detecting heroin and morphine',fastblueTitle:'Fast Blue B Salt Test',fastblueDesc:'For detecting cannabis (THC)',duquenoisTitle:'Duquenois-Levine Test',duquenoisDesc:'For detecting cannabis and derivatives',cobaltTitle:'Cobalt Thiocyanate Test',cobaltDesc:'For detecting cocaine',scottTitle:'Scott Test',scottDesc:'For detecting cocaine and lidocaine',wagnerTitle:'Wagner Test',wagnerDesc:'For detecting alkaloids',simonTitle:'Simon Test',simonDesc:'For detecting MDMA and methamphetamine',ehrlichTitle:'Ehrlich Test',ehrlichDesc:'For detecting LSD and psilocybin',liebermannTitle:'Liebermann Test',liebermannDesc:'For detecting amphetamines',proceedBtn:'Proceed to Next Step',copyrightText:'All rights reserved to the program developers',copyrightNote:'This system was developed for educational and research purposes',versionInfo:'Version 1.0.0 - January 2025'}};
const chemicalDB=[{method_name:'Marquis Test',color_result:'Purple to violet',possible_substance:'Opium'},{method_name:'Marquis Test',color_result:'Brownish purple',possible_substance:'Morphine'},{method_name:'Marquis Test',color_result:'Purple',possible_substance:'Heroin'},{method_name:'Marquis Test',color_result:'Orange → Brown',possible_substance:'Amphetamine'},{method_name:'Marquis Test',color_result:'Orange',possible_substance:'Methamphetamine'},{method_name:'Marquis Test',color_result:'Red → Brown',possible_substance:'MDMA (Ecstasy)'},{method_name:'Marquis Test',color_result:'Yellow → Brown',possible_substance:'Mescaline'},{method_name:'Marquis Test',color_result:'No color change',possible_substance:'Cocaine, Cannabis'},{method_name:'Ferric Sulfate Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Ferric Sulfate Test',color_result:'Green',possible_substance:'Cannabis compounds'},{method_name:'Ferric Sulfate Test',color_result:'Purple',possible_substance:'Phenothiazines'},{method_name:'Ferric Sulfate Test',color_result:'Red',possible_substance:'Salicylates'},{method_name:'Ferric Sulfate Test',color_result:'Yellow',possible_substance:'Barbiturates'},{method_name:'Mecke Test',color_result:'Blue to green',possible_substance:'Morphine'},{method_name:'Mecke Test',color_result:'Blue',possible_substance:'Codeine'},{method_name:'Mecke Test',color_result:'Dark green',possible_substance:'Heroin'},{method_name:'Mecke Test',color_result:'Yellow → Light Green',possible_substance:'MDMA (Ecstasy)'},{method_name:'Mecke Test',color_result:'Orange',possible_substance:'Methamphetamine'},{method_name:'Mecke Test',color_result:'No color change',possible_substance:'Cocaine, Cannabis'},{method_name:'Nitric Acid Test',color_result:'Yellow',possible_substance:'Heroin'},{method_name:'Nitric Acid Test',color_result:'Orange',possible_substance:'Morphine'},{method_name:'Nitric Acid Test',color_result:'Red',possible_substance:'Codeine'},{method_name:'Fast Blue B Salt Test',color_result:'Blue',possible_substance:'Cannabis (THC)'},{method_name:'Fast Blue B Salt Test',color_result:'Purple',possible_substance:'Cannabis compounds'},{method_name:'Fast Blue B Salt Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Duquenois-Levine Test',color_result:'Purple',possible_substance:'Cannabis (THC)'},{method_name:'Duquenois-Levine Test',color_result:'Blue',possible_substance:'Cannabis compounds'},{method_name:'Duquenois-Levine Test',color_result:'Green',possible_substance:'Cannabis derivatives'},{method_name:'Cobalt Thiocyanate Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Cobalt Thiocyanate Test',color_result:'Light blue',possible_substance:'Cocaine HCl'},{method_name:'Cobalt Thiocyanate Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Scott Test',color_result:'Blue',possible_substance:'Cocaine'},{method_name:'Scott Test',color_result:'Pink',possible_substance:'Lidocaine'},{method_name:'Scott Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Wagner Test',color_result:'Brown',possible_substance:'Alkaloids'},{method_name:'Wagner Test',color_result:'Orange-brown',possible_substance:'Morphine'},{method_name:'Wagner Test',color_result:'Yellow-brown',possible_substance:'Codeine'},{method_name:'Simon Test',color_result:'Blue',possible_substance:'MDMA'},{method_name:'Simon Test',color_result:'Purple',possible_substance:'Methamphetamine'},{method_name:'Simon Test',color_result:'No color change',possible_substance:'Other substances'},{method_name:'Ehrlich Test',color_result:'Purple',possible_substance:'LSD'},{method_name:'Ehrlich Test',color_result:'Blue',possible_substance:'Psilocybin'},{method_name:'Ehrlich Test',color_result:'Pink',possible_substance:'DMT'},{method_name:'Liebermann Test',color_result:'Orange',possible_substance:'Amphetamine'},{method_name:'Liebermann Test',color_result:'Red',possible_substance:'Methamphetamine'},{method_name:'Liebermann Test',color_result:'Yellow',possible_substance:'MDMA'}];
function toggleLanguage(){playSound('click');currentLang=currentLang==='ar'?'en':'ar';const html=document.documentElement;if(currentLang==='ar'){html.setAttribute('dir','rtl');html.setAttribute('lang','ar');html.style.fontFamily='Noto Sans Arabic, system-ui, sans-serif'}else{html.setAttribute('dir','ltr');html.setAttribute('lang','en');html.style.fontFamily='Inter, system-ui, sans-serif'}updateTexts();document.querySelector('.lang-toggle').textContent=currentLang==='ar'?'🌐 EN':'🌐 AR';showNotification(currentLang==='ar'?'تم تغيير اللغة إلى العربية':'Language changed to English')}
function updateTexts(){Object.keys(translations[currentLang]).forEach(key=>{const element=document.getElementById(key);if(element)element.textContent=translations[currentLang][key]})}
function selectTest(type){selectedTest=type;showStep(2);updateProgress(50);loadInstructions(type);showNotification(currentLang==='ar'?'تم اختيار الاختبار':'Test selected')}
function showStep(stepNum){document.querySelectorAll('.step').forEach(step=>step.classList.add('hidden'));document.getElementById(`step${stepNum}`).classList.remove('hidden')}
function updateProgress(percent){document.getElementById('progressFill').style.width=percent+'%'}
function loadInstructions(type){const instructions={marquis:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف قطرة من كاشف ماركيز، راقب تغير اللون',en:'Place small amount on test plate, add Marquis reagent drop, observe color change'},ferric:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف قطرة من كبريتات الحديد، راقب تكوين المعقدات',en:'Place small amount on test plate, add ferric sulfate drop, observe complex formation'},mecke:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف قطرة من كاشف ميكي، راقب اللون الناتج',en:'Place small amount on test plate, add Mecke reagent drop, observe resulting color'},nitric:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف قطرة من حمض النيتريك، راقب تغير اللون',en:'Place small amount on test plate, add nitric acid drop, observe color change'},fastblue:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف محلول الملح الأزرق السريع، راقب تكوين اللون الأزرق',en:'Place small amount on test plate, add Fast Blue B salt solution, observe blue color formation'},duquenois:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف دوكينوا-ليفين، راقب تكوين اللون البنفسجي',en:'Place small amount on test plate, add Duquenois-Levine reagent, observe purple color formation'},cobalt:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف محلول كوبالت ثيوسيانات، راقب تكوين اللون الأزرق',en:'Place small amount on test plate, add cobalt thiocyanate solution, observe blue color formation'},scott:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف سكوت، راقب تغير اللون',en:'Place small amount on test plate, add Scott reagent, observe color change'},wagner:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف واجنر، راقب تكوين الراسب البني',en:'Place small amount on test plate, add Wagner reagent, observe brown precipitate formation'},simon:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف سايمون، راقب تكوين اللون الأزرق',en:'Place small amount on test plate, add Simon reagent, observe blue color formation'},ehrlich:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف إيرليش، راقب تكوين اللون البنفسجي',en:'Place small amount on test plate, add Ehrlich reagent, observe purple color formation'},liebermann:{ar:'ضع كمية صغيرة من المادة على لوحة الاختبار، أضف كاشف ليبرمان، راقب تغير اللون',en:'Place small amount on test plate, add Liebermann reagent, observe color change'}};
document.getElementById('instructions').innerHTML=`<div style="background:rgba(255,255,255,0.1);padding:20px;border-radius:15px;margin-bottom:20px"><h3>${currentLang==='ar'?'تعليمات الاختبار':'Test Instructions'}</h3><p style="margin-top:10px;line-height:1.6">${instructions[type][currentLang]}</p></div><div style="background:rgba(255,200,0,0.2);padding:15px;border-radius:10px;border-left:4px solid #ffd700"><h4 style="color:#ffd700;margin-bottom:10px">⚠️ ${currentLang==='ar'?'تحذيرات السلامة':'Safety Warnings'}</h4><ul style="margin-right:20px"><li>${currentLang==='ar'?'استخدم القفازات الواقية':'Wear protective gloves'}</li><li>${currentLang==='ar'?'تأكد من التهوية الجيدة':'Ensure proper ventilation'}</li><li>${currentLang==='ar'?'لا تلمس الكواشف مباشرة':'Do not touch reagents directly'}</li></ul></div>`}
function proceedToStep3(){showStep(3);updateProgress(75);loadColorOptions()}
function loadColorOptions(){const testMap={'marquis':'Marquis Test','ferric':'Ferric Sulfate Test','mecke':'Mecke Test','nitric':'Nitric Acid Test','fastblue':'Fast Blue B Salt Test','duquenois':'Duquenois-Levine Test','cobalt':'Cobalt Thiocyanate Test','scott':'Scott Test','wagner':'Wagner Test','simon':'Simon Test','ehrlich':'Ehrlich Test','liebermann':'Liebermann Test'};const testName=testMap[selectedTest];const colors=chemicalDB.filter(item=>item.method_name===testName);const colorGrid=document.getElementById('colorOptions');colorGrid.innerHTML='';colors.forEach((color,index)=>{const colorDiv=document.createElement('div');colorDiv.className='color-option';colorDiv.onclick=()=>selectColor(color.color_result,color.possible_substance);colorDiv.innerHTML=`<div class="color-swatch" style="background:${getColorHex(color.color_result)}"></div><h4>${translateColor(color.color_result)}</h4><p style="opacity:0.8;font-size:0.9rem">${color.possible_substance}</p>`;colorGrid.appendChild(colorDiv)})}
function selectColor(color,substance){selectedColor=color;showStep(4);updateProgress(100);showResults(color,substance)}
function showResults(color,substance){document.getElementById('results').innerHTML=`<div class="result-icon">🎯</div><h3 class="result-title">${currentLang==='ar'?'نتيجة الاختبار':'Test Result'}</h3><div class="result-details"><h4 style="color:#4ade80;margin-bottom:10px">${currentLang==='ar'?'اللون المُلاحظ':'Observed Color'}: ${translateColor(color)}</h4><h4 style="color:#60a5fa;margin-bottom:10px">${currentLang==='ar'?'المادة المحتملة':'Possible Substance'}: ${substance}</h4><p style="margin-top:15px;opacity:0.9">${currentLang==='ar'?'يُنصح بإجراء اختبارات تأكيدية إضافية للتأكد من النتيجة':'Additional confirmatory tests recommended to verify the result'}</p></div>`;testData={test:selectedTest,color:color,substance:substance,timestamp:new Date().toISOString()}}
function getColorHex(colorName){const colorMap={'Purple to violet':'#8A2BE2','Brownish purple':'#8B4513','Purple':'#800080','Orange → Brown':'#FF8C00','Orange':'#FFA500','Red → Brown':'#CD853F','Yellow → Brown':'#DAA520','No color change':'#F5F5F5','Blue':'#0000FF','Green':'#008000','Red':'#FF0000','Yellow':'#FFFF00','Blue to green':'#0080FF','Dark green':'#006400','Yellow → Light Green':'#ADFF2F','Light blue':'#87CEEB','Orange-brown':'#D2691E','Yellow-brown':'#B8860B','Pink':'#FFC0CB','Brown':'#A52A2A'};return colorMap[colorName]||'#CCCCCC'}
function translateColor(color){const translations={'Purple to violet':currentLang==='ar'?'بنفسجي إلى بنفسجي داكن':'Purple to violet','Brownish purple':currentLang==='ar'?'بنفسجي بني':'Brownish purple','Purple':currentLang==='ar'?'بنفسجي':'Purple','Orange → Brown':currentLang==='ar'?'برتقالي إلى بني':'Orange to Brown','Orange':currentLang==='ar'?'برتقالي':'Orange','Red → Brown':currentLang==='ar'?'أحمر إلى بني':'Red to Brown','Yellow → Brown':currentLang==='ar'?'أصفر إلى بني':'Yellow to Brown','No color change':currentLang==='ar'?'لا يوجد تغيير في اللون':'No color change','Blue':currentLang==='ar'?'أزرق':'Blue','Green':currentLang==='ar'?'أخضر':'Green','Red':currentLang==='ar'?'أحمر':'Red','Yellow':currentLang==='ar'?'أصفر':'Yellow','Blue to green':currentLang==='ar'?'أزرق إلى أخضر':'Blue to green','Dark green':currentLang==='ar'?'أخضر داكن':'Dark green','Yellow → Light Green':currentLang==='ar'?'أصفر إلى أخضر فاتح':'Yellow to Light Green','Light blue':currentLang==='ar'?'أزرق فاتح':'Light blue','Orange-brown':currentLang==='ar'?'برتقالي بني':'Orange-brown','Yellow-brown':currentLang==='ar'?'أصفر بني':'Yellow-brown','Pink':currentLang==='ar'?'وردي':'Pink','Brown':currentLang==='ar'?'بني':'Brown'};return translations[color]||color}
function shareResult(type){if(type==='print'){const reportData={testType:selectedTest,observedColor:selectedColor,testDate:new Date().toLocaleDateString(),testTime:new Date().toLocaleTimeString(),results:testData};localStorage.setItem('colorTestReport',JSON.stringify(reportData));window.open('print-report.html','_blank')}else if(type==='save'){const data=JSON.stringify(testData,null,2);const blob=new Blob([data],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`color-test-${Date.now()}.json`;a.click()}showNotification(currentLang==='ar'?'تم تنفيذ العملية':'Operation completed')}
function newTest(){selectedTest='';selectedColor='';testData={};showStep(1);updateProgress(25);showNotification(currentLang==='ar'?'اختبار جديد':'New test started')}
function showNotification(message){const notification=document.createElement('div');notification.className='notification show';notification.textContent=message;document.body.appendChild(notification);setTimeout(()=>{notification.classList.remove('show');setTimeout(()=>document.body.removeChild(notification),300)},3000)}
let adminKeySequence='',adminAccess=false,audioContext;
function initAudio(){try{audioContext=new(window.AudioContext||window.webkitAudioContext)()}catch(e){console.log('Audio not supported')}}
function playSound(type){if(!audioContext)return;const oscillator=audioContext.createOscillator();const gainNode=audioContext.createGain();oscillator.connect(gainNode);gainNode.connect(audioContext.destination);const frequencies={click:800,success:1000,error:400,notification:600};oscillator.frequency.setValueAtTime(frequencies[type]||600,audioContext.currentTime);gainNode.gain.setValueAtTime(0.1,audioContext.currentTime);gainNode.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+0.1);oscillator.start();oscillator.stop(audioContext.currentTime+0.1)}
let adminKeySequence='',adminAccess=false;
document.addEventListener('keydown',function(e){adminKeySequence+=e.key.toUpperCase();if(adminKeySequence.length>5)adminKeySequence=adminKeySequence.slice(-5);if(adminKeySequence==='ADMIN'){showAdminPanel()}});
document.querySelector('.logo').addEventListener('click',function(e){if(e.detail===3){showAdminPanel()}});
function checkAdminAccess(){const hash=window.location.hash;const params=new URLSearchParams(window.location.search);if(hash==='#secret-control-panel-2025'||hash==='#mna2025'||hash==='#yma2025'||params.get('path')==='hidden-admin-system-xyz'){showAdminPanel()}}
function showAdminPanel(){if(adminAccess)return;adminAccess=true;const adminPanel=document.createElement('div');adminPanel.id='adminPanel';adminPanel.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:9999;display:flex;align-items:center;justify-content:center;color:#fff;font-family:monospace';adminPanel.innerHTML=`<div style="background:#1a1a2e;padding:30px;border-radius:15px;max-width:600px;width:90%"><h2 style="color:#4ade80;margin-bottom:20px;text-align:center">🔐 لوحة تحكم المدير</h2><div style="margin-bottom:20px"><h3 style="color:#60a5fa;margin-bottom:10px">إدارة قاعدة البيانات:</h3><button onclick="exportDB()" style="background:#10b981;color:#fff;border:none;padding:10px 20px;margin:5px;border-radius:5px;cursor:pointer">تصدير قاعدة البيانات</button><button onclick="importDB()" style="background:#3b82f6;color:#fff;border:none;padding:10px 20px;margin:5px;border-radius:5px;cursor:pointer">استيراد قاعدة البيانات</button><button onclick="resetDB()" style="background:#ef4444;color:#fff;border:none;padding:10px 20px;margin:5px;border-radius:5px;cursor:pointer">إعادة تعيين</button></div><div style="margin-bottom:20px"><h3 style="color:#60a5fa;margin-bottom:10px">إحصائيات النظام:</h3><p>عدد الاختبارات: ${chemicalDB.length}</p><p>آخر تحديث: ${new Date().toLocaleString('ar-SA')}</p></div><div style="text-align:center"><button onclick="closeAdminPanel()" style="background:#6b7280;color:#fff;border:none;padding:10px 30px;border-radius:5px;cursor:pointer">إغلاق</button></div></div>`;document.body.appendChild(adminPanel)}
function exportDB(){const data=JSON.stringify(chemicalDB,null,2);const blob=new Blob([data],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`chemical-database-${Date.now()}.json`;a.click();showNotification('تم تصدير قاعدة البيانات')}
function importDB(){const input=document.createElement('input');input.type='file';input.accept='.json';input.onchange=function(e){const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=function(e){try{const newDB=JSON.parse(e.target.result);if(Array.isArray(newDB)&&newDB.length>0){chemicalDB.length=0;chemicalDB.push(...newDB);showNotification('تم استيراد قاعدة البيانات بنجاح')}else{showNotification('ملف قاعدة البيانات غير صحيح')}}catch(err){showNotification('خطأ في قراءة الملف')}};reader.readAsText(file)}};input.click()}
function resetDB(){if(confirm('هل أنت متأكد من إعادة تعيين قاعدة البيانات؟')){location.reload()}}
function closeAdminPanel(){const panel=document.getElementById('adminPanel');if(panel){document.body.removeChild(panel);adminAccess=false}}
checkAdminAccess();updateTexts();initAudio();
</script>
</body>
</html>
